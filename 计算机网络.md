## 互联网的组成

+ 边缘部分

  + 客户-服务器方式（C/S方式)

    主要是由客户端和服务端组成，他们之间的通信指的是两个进程之间的通信。他们的关系是服务被服务的关系，客户端主动发送请求，服务端被动接受请求，客户端与服务端建立通信之后，他们之间的通信是相互的，客户端与服务端之间可以互相发送或者接受请求。

  + 对等方式(P2P方式)

    对等方式指的是两台计算机系统进行平等的交流，他们之间没有客户端与服务端的区别，可以互相读取对方硬盘上的数据，其本质还是一个客户-服务器方式的通信。

+ 核心部分

  核心部分由大量的主机实现连通性，起特殊作用的是路由器，路由器是实现分组构建的关键部件。其任务是接收到转发的分组。

  + 电路交换

    电路交换的特点是占用通信资源->一直占用通信资源->归还通信资源，这种交换方式效率很低，实现任何两台计算机之间的通信成本太大。

  + 分组交换

    分组交换是采用存储转发的一种放方式，我们将要传输的整体数据叫做报文，然后，我们将报文分为许多个部分，叫做分组，在每个分组加上一些控制信息(首部）进行数据的传输，最终将接收到的分组拼接而原始数据。互联网的核心是由许多路由器组成的，主机是用来处理数据，而路由器是传输数据，进行分组的转发。即进行分组交换的。路由器的使用实现了互联网的高速地通信。如果将单个互联网简化为一个链路，那么路由器就是这个链路的结点。这种传输方式如果在数据中出现传输障碍的话，更具协议会选择最适合的路径，保证了传输的高效。分组在哪个部分进行传输，那么这个就占用那个信道的资源。但是由于分组需要进行排队等待传输，所以会造成一定的时延。

  + 报文交换

    报文交换类似于分组交换，但是不如分组交换那样速度快。将报文先传送到相邻的结点，然后进行存储查找转发表，转发到下一个结点。





## 网络层

### 互联网的路由选择协议

#### 内部网关协议RIP

+ 从路由器到直接来连接的网络的距离定义为1.
+ RIP协议的距离为跳数。最多只能包包含15个路由器，所以这是一种小型网络协议。
+ RIP协议开销较小，传输快。
+ RIP金和相邻路由器交换信息，路由器交换信息是和当前自己的路由表上的路由交换信息，同时按照固定的时间间隔和交换路由信息学。
+ 好消息传播快，坏消息传播慢。

#### OSPF协议（开放最短路优先)

+ 向本自治系统的所有路由器发送信息。这也叫做泛洪法。
+ 只有当链路状态发生改变时，路由器才向所有的路由器用泛洪法。

#### 外部网关协议BGP

#### IPV6

+ IPV6将首部长度变成固定的40字节。称为基本首部。
+ 取消了首部的检验字段。
+ IPV6数据包的目的地址可以说单播，多播和任播三种。
+ ipv6和ipv4的比较
  + 取消了首部长度字段
  + 取消了服务类型字段
  + 取消了总长度字段
  + 取消了标识，标志和片偏移字段
  + 把TTL字段改成条数限制字段
  + 取消了协议字段
  + 取消了检验和字段
  + 取消了选项字段
+ IPV6向IPV4的过渡
  + 使用双协议栈，双协议栈是指在协议传输到某一个字段的时候进行协议的转换，但是会造成部分数据的缺失。
  + 使用隧道协议，该协议是在原数据包的基础上套另一个协议，然后通过该种协议进行数据的传输。



## 运输层

#### 概述

+ 运输层是端到端的通信，这里的端是程序在运行的时候暴露的端口。
+ 传输层提供了TCP和UDP两种传输协议
  + TCP是面向连接的，可靠的传输协议，将报文分为多个字段进行传输。有流量控制，无丢失，无重复，按序交付。
  + UDP协议是无连接的，不可靠的协议。无流量控制，有丢失，有重复，可能存在失序的情况。

#### 运输层的端口

+ 端口号是相对本地而言的，端口是为了标记计算机进程，端口只是对本地有意义。
+ 默认的端口是80端口
+ 发送方让应用层的各种引用进程都能将其数据通过端口向下交付给运输层。
+ 接收方那该让运输层知道应当将其报文段中的数据向上通过端口交付给引用层相应的进程。
+ 端口的范围一般为0-65535,其中熟知的端口号一般为0-1023,登记的端口号为:1024-49151,客户端口号或者短暂端口号为:49151-65535

#### UDP(用户数据报)协议

+ 由数据字段和首部字段组成
  + 首部字段为远端口，目的端口，长度和检验和
  + 